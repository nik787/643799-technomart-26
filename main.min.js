var popupMap=document.querySelector(".popup__map"),popupForm=document.querySelector(".popup__contact-form"),popapCatalog=document.querySelector(".popup__catalog");if(popapCatalog)for(var element,openBuy=document.querySelectorAll(".button--buy"),closeBuy=popapCatalog.querySelector(".popup__close"),index=0;index<openBuy.length;index++)element=openBuy[index],element.addEventListener("click",function(a){a.preventDefault(),openModal(element,popapCatalog)}),closeBuy.addEventListener("click",function(a){a.preventDefault(),closePopup(closeBuy,popapCatalog)});else{var openMap=document.querySelector(".maps"),closeMap=popupMap.querySelector(".popup__close"),openForm=document.querySelector(".contact__button"),closeForm=popupForm.querySelector(".popup__close"),popupInput=popupForm.querySelectorAll("input, textarea"),popupLogin=popupForm.querySelector("#name"),popupEmail=popupForm.querySelector("#email"),popupText=popupForm.querySelector("#text-area"),popupSubmit=popupForm.querySelector(".contact-form__submit"),isStorageSupport=!0,loginStorage="",emailStorage="";try{loginStorage=localStorage.getItem("login"),emailStorage=localStorage.getItem("email")}catch(a){isStorageSupport=!1}openMap.addEventListener("click",function(a){a.preventDefault(),openModal(openMap,popupMap)}),closeMap.addEventListener("click",function(a){a.preventDefault(),closePopup(closeMap,popupMap)}),popupForm.addEventListener("submit",valid),openForm.addEventListener("click",function(a){a.preventDefault(),loginStorage&&emailStorage?popupText.focus():loginStorage?popupEmail.focus():popupLogin.focus(),popupLogin.value=loginStorage,popupEmail.value=emailStorage,openModal(openForm,popupForm)}),closeForm.addEventListener("click",function(a){a.preventDefault(),closePopup(closeForm,popupForm)}),popupForm.addEventListener("submit",valid),ymaps.ready(function(){var a=new ymaps.Map("map",{center:[59.938872,30.322617],zoom:16,controls:[],type:"yandex#map"},{searchControlProvider:"yandex#search"},{suppressMapOpenBlock:!0}),b=ymaps.templateLayoutFactory.createClass(`<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>`),c=new ymaps.Placemark([59.938631,30.323055],{hintContent:`191186, Санкт-Петербург,
            ул. Б. Конюшенная, д. 19/8`},{iconLayout:"default#image"});a.behaviors.disable(["rightMouseButtonMagnifier","scrollZoom"]),a.geoObjects.add(c)})}function valid(a){for(var b,c=0;c<popupInput.length;c++)b=popupInput[c],b.setAttribute("required",!0),b.validity.valid?isStorageSupport&&(localStorage.setItem("login",popupLogin.value),localStorage.setItem("email",popupEmail.value)):(popupError(),a.preventDefault(),popupSubmit.addEventListener("click",function(){b.validity.valid||popupError()}))}function popupError(){popupForm.classList.add("popup--error"),setTimeout(()=>{popupForm.classList.remove("popup--error")},2e3)}function openModal(a,b){b.classList.add("popup--open"),popupOpenAnimate(b),window.addEventListener("keydown",function(c){27===c.keyCode&&b.classList.contains("popup--open")&&(c.preventDefault(),closePopup(a,b))})}function popupOpenAnimate(a){a.classList.add("popup--open-animate"),setTimeout(()=>{a.classList.remove("popup--open-animate")},2e3)}function closePopup(a,b){b.classList.add("popup--close"),setTimeout(()=>{b.classList.remove("popup--open"),b.classList.remove("popup--close")},800),a.focus()}var product=document.querySelectorAll(".product");product.forEach(a=>{a.addEventListener("focus",function(){var b=a.querySelectorAll(".product__button");b[1].addEventListener("blur",function(){a.classList.remove("product--show")}),a.classList.add("product--show")})});
